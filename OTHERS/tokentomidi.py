import joblib
from GridTokenizer2 import remove_bars, detokenize


tokenizer = joblib.load("tokenizer_test6.pkl")
tokenized = joblib.load("tokenized_test6.pkl")
print(tokenized[0])
print(tokenizer.token_to_id)
print(tokenizer.tokenize_vector(["timesig.4.4"]))
to_detok = [515,
 835,
 577,
 679,
 646,
 608,
 583,
 835,
 612,
 606,
 592,
 511,
 835,
 561,
 549,
 541,
 551,
 835,
 553,
 565,
 835,
 579,
 592,
 626,
 835,
 596,
 608,
 541,
 551,
 835,
 553,
 563,
 592,
 835,
 563,
 549,
 543,
 835,
 537,
 545,
 561,
 561,
 577,
 561,
 561,
 561,
 545,
 561,
 561,
 561,
 561,
 561,
 561,
 561,
 561,
 561,
 545,
 561,
 577,
 561,
 545,
 545,
 561,
 561,
 561,
 561,
 577,
 561,
 561,
 577,
 561,
 561,
 561,
 561,
 545,
 561,
 561,
 604,
 577,
 561,
 561,
 604,
 577,
 561,
 561,
 604,
 561,
 561,
 561,
 577,
 604,
 561,
 561,
 561,
 545,
 537,
 577,
 561,
 561,
 577]
to_detok = [847] + to_detok[40:]

print(tokenizer.token_to_id)
detok = tokenizer.detokenize(to_detok)
print(detok)
detok = remove_bars(detok)
print(detok[-60:])
detokenized = detokenize(detok, 'output.mid')
print(detokenized)